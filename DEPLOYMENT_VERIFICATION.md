# デプロイ確認ガイド / Deployment Verification Guide

## 📋 確認すべきページと機能 / Pages and Features to Verify

### 1. トップページ / Home Page
**URL**: `https://your-domain.com/ja`

#### 確認ポイント / Checkpoints:
- [ ] Hero セクションが正しく表示される
- [ ] クイック検索バーが表示される
- [ ] "検索" ボタンをクリック → `/sale` ページに遷移

**期待される動作:**
```
トップページ
  ↓ クイック検索バーの「検索」ボタンをクリック
買卖ページ (/sale)
  ↓ カテゴリ: すべて (デフォルト)
全物件が表示される
```

---

### 2. 買卖ページ (統合版) / Sale Page (Unified)
**URL**: `https://your-domain.com/ja/sale`

#### 確認ポイント / Checkpoints:

**A. カテゴリタブ**
- [ ] 3つのカテゴリタブが表示される:
  - すべて (All)
  - 住宅用 (Residential) 
  - 投資用 (Investment)
- [ ] 各タブをクリックして切り替えができる
- [ ] 選択中のタブが青色でハイライトされる

**B. フィルターサイドバー**
- [ ] デスクトップ: 左側にサイドバーとして表示
- [ ] モバイル: 「詳細検索」ボタンで展開
- [ ] 基本フィルター（全カテゴリ）:
  - [ ] 価格帯（最低価格・最高価格）
  - [ ] エリア（市区町村選択）
  - [ ] 竣工年（開始年・終了年）

**C. 投資用専用フィルター** (投資用カテゴリ選択時のみ)
- [ ] 利回り範囲フィルター表示
- [ ] 9種類の特殊機能チェックボックス表示:
  - [ ] IoTシステム
  - [ ] 顔認証
  - [ ] 防音構造
  - [ ] 民泊運営中
  - [ ] 一括借上
  - [ ] スマートホーム
  - [ ] 公園至近
  - [ ] 複数路線
  - [ ] 都市計画受益
- [ ] 6種類のクイック検索プリセット表示:
  - [ ] 🏢 民泊可能物件
  - [ ] 🤖 最新IoT導入
  - [ ] 🎵 特殊防音構造
  - [ ] 🆕 新築・準新築
  - [ ] 📈 高利回り物件
  - [ ] 🌟 将来性高い

**D. 物件一覧**
- [ ] グリッドレイアウトで物件カードが表示される
- [ ] レスポンシブ:
  - モバイル: 1列
  - タブレット: 2列
  - デスクトップ: 3列
- [ ] 各物件カードに以下の情報が表示:
  - 物件名
  - 価格
  - 所在地
  - 利回り（投資用物件のみ）
  - 特徴バッジ（投資用物件のみ、最大3個 + 追加数）

**E. ソート機能**
- [ ] ソートドロップダウンが表示される
- [ ] ソートオプション:
  - [ ] おすすめ順
  - [ ] 価格: 安い順
  - [ ] 価格: 高い順
  - [ ] 利回り: 高い順（投資用のみ）
  - [ ] 築年数: 新しい順

**F. ページネーション**
- [ ] 物件が12件以上の場合、ページネーションが表示される
- [ ] 「前へ」「次へ」ボタンが動作する
- [ ] ページ番号をクリックして遷移できる

**G. 空の状態**
- [ ] 検索結果が0件の場合:
  - "物件が見つかりませんでした" メッセージ表示
  - "すべての物件を表示" ボタン表示

---

### 3. 物件検索ページ / Properties Search Page
**URL**: `https://your-domain.com/ja/properties`

#### 確認ポイント / Checkpoints:
- [ ] 検索ページが表示される
- [ ] 検索バーが表示される
- [ ] **「詳細検索」ボタンが `/sale` ページへのリンクになっている**
- [ ] 「詳細検索」をクリック → `/sale` ページに遷移

**期待される動作:**
```
物件検索ページ (/properties)
  ↓ 「詳細検索」ボタンをクリック
買卖ページ (/sale)
  ↓ カテゴリ: すべて
全物件が表示される
```

---

### 4. 削除されたページ / Removed Pages (404エラーが期待される)

以下のURLはもう存在しないため、404エラーまたは別のページにリダイレクトされるべき:

- [ ] `https://your-domain.com/ja/premium-properties` → 404または/saleにリダイレクト

**重要:** これは正常な動作です。投資用物件は `/sale` ページに統合されています。

---

## 🧪 機能テストシナリオ / Functional Test Scenarios

### シナリオ 1: トップページから投資用物件を検索

```
1. トップページにアクセス (/)
2. クイック検索バーの「検索」ボタンをクリック
3. 買卖ページ (/sale) に遷移することを確認
4. 「投資用」タブをクリック
5. 投資用物件のみが表示されることを確認
6. フィルターサイドバーに「利回り」フィルターが表示されることを確認
7. フィルターサイドバーに9種類の特殊機能が表示されることを確認
```

**期待される結果:**
- ✅ 投資用物件のみ表示
- ✅ 利回り情報が各カードに表示
- ✅ 特徴バッジが表示（IoT、防音など）

---

### シナリオ 2: フィルターを使用した投資用物件検索

```
1. 買卖ページ (/sale) にアクセス
2. 「投資用」タブをクリック
3. 利回りフィルター: 最低利回り 5% を入力
4. エリアフィルター: 「新宿区」を選択
5. 特殊機能: 「IoTシステム」をチェック
6. 検索結果が自動的に更新されることを確認
```

**期待される結果:**
- ✅ 新宿区の物件のみ表示
- ✅ 利回り5%以上の物件のみ表示
- ✅ IoTシステム搭載物件のみ表示

---

### シナリオ 3: クイック検索プリセットの使用

```
1. 買卖ページ (/sale) の「投資用」タブをクリック
2. フィルターサイドバーの「クイック検索」セクションを確認
3. 「🏢 民泊可能物件」プリセットをクリック
4. フィルターが自動的に適用されることを確認
5. 民泊運営中の物件のみが表示されることを確認
```

**期待される結果:**
- ✅ 民泊関連フィルターが自動適用
- ✅ 対応する物件のみ表示

---

### シナリオ 4: レスポンシブデザインの確認

```
1. 買卖ページ (/sale) にアクセス
2. ブラウザウィンドウを縮小してモバイルサイズにする
3. 「詳細検索」ボタンが表示されることを確認
4. 「詳細検索」ボタンをクリックしてフィルターが展開されることを確認
5. 物件カードが1列で表示されることを確認
6. ウィンドウを拡大してデスクトップサイズにする
7. フィルターが左サイドバーとして常時表示されることを確認
8. 物件カードが3列で表示されることを確認
```

**期待される結果:**
- ✅ モバイル: 1列、折りたたみ式フィルター
- ✅ タブレット: 2列、サイドバーフィルター
- ✅ デスクトップ: 3列、サイドバーフィルター

---

## 🎨 デザイン確認 / Design Verification

### カラーパレット / Color Palette
- [ ] Primary色: #0ea5e9 (Sky Blue) が正しく適用されている
- [ ] Gold色: #eab308 が正しく適用されている
- [ ] グラデーション背景が正しく表示されている

### タイポグラフィ / Typography
- [ ] フォント: 'Inter', 'Noto Sans JP' が適用されている
- [ ] 日本語テキストが正しく表示されている

### アニメーション / Animations
- [ ] カテゴリタブのホバー効果が動作する
- [ ] 物件カードのホバー効果が動作する（拡大）
- [ ] ボタンのホバー効果が動作する

---

## 🌍 多言語確認 / Multi-language Verification

### 日本語 (ja)
- [ ] URL: `/ja/sale`
- [ ] すべてのテキストが日本語で表示される

### 中国語 (zh)
- [ ] URL: `/zh/sale`
- [ ] すべてのテキストが中国語で表示される

### 英語 (en)
- [ ] URL: `/en/sale`
- [ ] すべてのテキストが英語で表示される

---

## 🚨 既知の問題 / Known Issues

### データベース未設定の場合

Supabaseの環境変数が未設定の場合、以下のエラーが表示される可能性があります:

```
データベース設定が完了していません。環境変数を確認してください。
```

**解決方法:**
```bash
# .env.local に以下を追加
NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
```

### 物件データが表示されない場合

データベースマイグレーションが未実行の場合、物件データが表示されません。

**解決方法:**
```bash
# Supabaseマイグレーションを実行
cd supabase
supabase db push

# ZMN物件データをインポート
npm run import:zmn
```

---

## ✅ 最終チェックリスト / Final Checklist

### コア機能 / Core Features
- [ ] トップページが正しく表示される
- [ ] 買卖ページの3つのカテゴリタブが動作する
- [ ] フィルターが正しく適用される
- [ ] 物件カードが正しく表示される
- [ ] ページネーションが動作する
- [ ] ソート機能が動作する

### 投資用物件専用機能 / Investment-specific Features
- [ ] 利回りフィルターが表示される
- [ ] 9種類の特殊機能フィルターが表示される
- [ ] 6種類のクイック検索プリセートが表示される
- [ ] 物件カードに利回りが表示される
- [ ] 物件カードに特徴バッジが表示される

### UI/UX
- [ ] レスポンシブデザインが正しく動作する
- [ ] アニメーションがスムーズに動作する
- [ ] ローディング状態が正しく表示される
- [ ] 空の状態が正しく表示される

### ナビゲーション / Navigation
- [ ] トップページの検索ボタンが `/sale` にリンクしている
- [ ] 物件検索ページの詳細検索ボタンが `/sale` にリンクしている
- [ ] `/premium-properties` ページが削除されている（404）

### パフォーマンス / Performance
- [ ] 初期ロード時間が2秒以内
- [ ] フィルター適用が500ms以内
- [ ] ページ遷移がスムーズ

---

## 📞 問題が発生した場合 / If Issues Occur

### 1. ページが表示されない

**確認事項:**
- ブラウザのキャッシュをクリア（Ctrl+Shift+R / Cmd+Shift+R）
- デベロッパーコンソールでエラーを確認（F12）
- Vercelのデプロイログを確認

### 2. 物件が表示されない

**確認事項:**
- Supabase環境変数が設定されているか
- データベースマイグレーションが実行されているか
- Network タブでAPIレスポンスを確認

### 3. フィルターが動作しない

**確認事項:**
- ブラウザコンソールでJavaScriptエラーを確認
- カテゴリタブが正しく選択されているか
- APIエンドポイントが正しく応答しているか

---

## 🎯 次のステップ / Next Steps

すべての確認項目がクリアできたら:

1. ✅ PRをレビュー・承認
2. ✅ main ブランチにマージ
3. ✅ 本番環境へデプロイ
4. ✅ 本番環境で再度テスト

---

**Document Version**: 1.0.0  
**Last Updated**: 2026-02-01  
**Status**: Ready for Verification
